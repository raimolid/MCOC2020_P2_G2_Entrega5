from reticulado import Reticulado
from barra import Barra

def caso_D():
	
	# Unidades base
	m = 1.
	kg = 1.
	s = 1. 
	
	#Unidades derivadas
	N = kg*m/s**2
	cm = 0.01*m
	mm = 0.001*m
	KN = 1000*N
	Pa = N / m**2
	KPa = 1000*Pa
	MPa = 1000*KPa
	GPa = 1000*MPa
	
	#Parametros
	L = 5.0   * m
	B = 2.0   * m
	H = 5.0   * m
	Z = 100.0 * m
	O = 10.0  * m #Origen
	A_X = 115.0 * m   
	A_Z = 70.0  * m
	
	#Inicializar modelo
	ret = Reticulado()

	#Nodos
	
	x = 43
	
	#Nodos Tablero
	for i in range(x+1):#47
		ret.agregar_nodo(O + i*L     , 0  ,  Z  )
	
	#Nodos en y = 2
	for i in range(x+1):#47
		ret.agregar_nodo(O + i*L     , B  ,  Z  )
		
	#Nodos arriba
	ret.agregar_nodo(O + 52.5   , B/2 ,  Z + H  )
	ret.agregar_nodo(A_X + 55.0   , B/2 ,  Z + H  )
	
	#Nodos de apoyo
	ret.agregar_nodo(A_X  , 0 ,  A_Z  )	#140 - 131

	#Barras
#	R = 100.0 * cm
#	t = 50.0  * mm		
#	props = [R,t,200*GPa, 7600*kg/m**3, 420*MPa]	
	
	R_t = [[0.35, 0.018], [0.63, 0.032], [0.32, 0.016], [0.6, 0.031], [0.29, 0.015], [0.58, 0.029], [0.26, 0.013], [0.54, 0.028], [0.22, 0.011], [0.52, 0.026], [0.16, 0.008], [0.48, 0.025], [0.09, 0.005], [0.46, 0.023], [0.14, 0.008], [0.42, 0.021], [0.21, 0.011], [0.38, 0.02], [0.26, 0.014], [0.35, 0.018], [0.31, 0.016], [0.31, 0.016], [0.35, 0.018], [0.26, 0.014], [0.38, 0.02], [0.21, 0.011], [0.42, 0.021], [0.14, 0.008], [0.46, 0.023], [0.09, 0.005], [0.48, 0.025], [0.16, 0.008], [0.52, 0.026], [0.22, 0.011], [0.54, 0.028], [0.26, 0.013], [0.58, 0.029], [0.29, 0.015], [0.6, 0.031], [0.32, 0.016], [0.63, 0.032], [0.35, 0.018], [0.62, 0.032], [0.29, 0.015], [0.6, 0.03], [0.26, 0.014], [0.58, 0.029], [0.24, 0.012], [0.54, 0.028], [0.2, 0.011], [0.52, 0.026], [0.16, 0.008], [0.49, 0.025], [0.11, 0.006], [0.46, 0.024], [0.11, 0.006], [0.44, 0.022], [0.18, 0.009], [0.4, 0.021], [0.22, 0.012], [0.38, 0.019], [0.27, 0.014], [0.34, 0.017], [0.3, 0.016], [0.3, 0.016], [0.34, 0.017], [0.27, 0.014], [0.38, 0.019], [0.22, 0.012], [0.4, 0.021], [0.18, 0.009], [0.44, 0.022], [0.11, 0.006], [0.46, 0.024], [0.11, 0.006], [0.49, 0.025], [0.16, 0.008], [0.52, 0.026], [0.2, 0.011], [0.54, 0.028], [0.24, 0.012], [0.58, 0.029], [0.26, 0.014], [0.6, 0.03], [0.3, 0.015], [0.62, 0.031], [0.18, 0.009], [0.12, 0.007], [0.12, 0.006], [0.11, 0.006], [0.1, 0.006], [0.1, 0.005], [0.09, 0.005], [0.08, 0.004], [0.07, 0.004], [0.06, 0.003], [0.04, 0.003], [0.04, 0.003], [0.06, 0.003], [0.07, 0.004], [0.08, 0.004], [0.09, 0.005], [0.1, 0.005], [0.1, 0.006], [0.11, 0.006], [0.12, 0.006], [0.12, 0.007], [0.72, 0.036], [0.72, 0.036], [0.12, 0.007], [0.12, 0.006], [0.11, 0.006], [0.1, 0.006], [0.1, 0.005], [0.09, 0.005], [0.08, 0.004], [0.07, 0.004], [0.06, 0.003], [0.04, 0.003], [0.04, 0.003], [0.06, 0.003], [0.07, 0.004], [0.08, 0.004], [0.09, 0.005], [0.1, 0.005], [0.1, 0.006], [0.11, 0.006], [0.12, 0.006], [0.12, 0.007], [0.18, 0.009], [0.72, 0.036], [0.13, 0.007], [0.12, 0.006], [0.12, 0.006], [0.11, 0.006], [0.1, 0.005], [0.09, 0.005], [0.08, 0.004], [0.07, 0.004], [0.06, 0.003], [0.05, 0.003], [0.04, 0.002], [0.05, 0.003], [0.06, 0.003], [0.07, 0.004], [0.08, 0.004], [0.09, 0.005], [0.1, 0.005], [0.11, 0.006], [0.12, 0.006], [0.12, 0.006], [0.13, 0.007], [0.13, 0.007], [0.13, 0.007], [0.13, 0.007], [0.12, 0.006], [0.12, 0.006], [0.11, 0.006], [0.1, 0.005], [0.09, 0.005], [0.08, 0.004], [0.07, 0.004], [0.06, 0.003], [0.05, 0.003], [0.04, 0.002], [0.05, 0.003], [0.06, 0.003], [0.07, 0.004], [0.08, 0.004], [0.09, 0.005], [0.1, 0.005], [0.11, 0.006], [0.12, 0.006], [0.12, 0.006], [0.13, 0.007], [0.72, 0.036], [1.0, 0.05], [0.28, 0.015], [0.28, 0.014], [0.26, 0.014], [0.26, 0.013], [0.26, 0.013], [0.25, 0.013], [0.24, 0.013], [0.24, 0.012], [0.24, 0.012], [0.24, 0.012], [0.24, 0.012], [0.24, 0.012], [0.24, 0.012], [0.24, 0.013], [0.25, 0.013], [0.26, 0.013], [0.26, 0.013], [0.26, 0.014], [0.28, 0.014], [0.28, 0.014], [0.28, 0.014], [0.3, 0.015], [0.29, 0.015], [0.28, 0.014], [0.27, 0.014], [0.26, 0.014], [0.26, 0.013], [0.26, 0.013], [0.25, 0.013], [0.25, 0.013], [0.25, 0.013], [0.25, 0.013], [0.25, 0.013], [0.25, 0.013], [0.25, 0.013], [0.26, 0.013], [0.26, 0.013], [0.26, 0.014], [0.27, 0.014], [0.28, 0.014], [0.28, 0.015], [0.3, 0.015], [1.0, 0.05], [0.32, 0.016], [0.36, 0.018], [0.3, 0.015], [0.34, 0.017], [0.29, 0.015], [0.34, 0.017], [0.28, 0.014], [0.32, 0.017], [0.27, 0.014], [0.32, 0.016], [0.26, 0.014], [0.31, 0.016], [0.26, 0.013], [0.3, 0.016], [0.25, 0.013], [0.3, 0.016], [0.25, 0.013], [0.3, 0.015], [0.24, 0.013], [0.3, 0.015], [0.24, 0.013], [0.3, 0.015], [0.24, 0.013], [0.3, 0.015], [0.25, 0.013], [0.3, 0.015], [0.25, 0.013], [0.3, 0.016], [0.26, 0.013], [0.3, 0.016], [0.26, 0.014], [0.31, 0.016], [0.27, 0.014], [0.32, 0.016], [0.28, 0.014], [0.32, 0.017], [0.29, 0.015], [0.34, 0.017], [0.3, 0.015], [0.34, 0.017], [0.31, 0.016], [0.35, 0.018], [0.36, 0.019], [0.33, 0.017], [0.36, 0.018], [0.32, 0.016], [0.34, 0.018], [0.31, 0.016], [0.34, 0.017], [0.3, 0.015], [0.33, 0.017], [0.29, 0.015], [0.32, 0.017], [0.28, 0.015], [0.32, 0.016], [0.28, 0.014], [0.32, 0.016], [0.27, 0.014], [0.31, 0.016], [0.27, 0.014], [0.31, 0.016], [0.26, 0.014], [0.3, 0.016], [0.26, 0.014], [0.3, 0.016], [0.26, 0.014], [0.31, 0.016], [0.26, 0.014], [0.31, 0.016], [0.27, 0.014], [0.32, 0.016], [0.27, 0.014], [0.32, 0.016], [0.28, 0.014], [0.32, 0.017], [0.28, 0.015], [0.33, 0.017], [0.29, 0.015], [0.34, 0.017], [0.3, 0.015], [0.34, 0.018], [0.31, 0.016], [0.36, 0.018], [0.32, 0.016], [0.37, 0.019], [0.34, 0.017], [0.32, 0.016]]
	props = [200*GPa, 7600*kg/m**3, 420*MPa]	
	
	barra_n = 0

	#Laterales e = 5 m
	for i in range(x):
		ret.agregar_barra(Barra(i,i+1,R_t[barra_n][0],R_t[barra_n][1],*props))
		barra_n += 1
		ret.agregar_barra(Barra(x+i+1,x+i+2,R_t[barra_n][0],R_t[barra_n][1],*props))
		barra_n += 1
	
	#Piramides	
	for i in range(22):
		ret.agregar_barra(Barra(i,88,R_t[barra_n][0],R_t[barra_n][1],*props))
		barra_n += 1
		
	for i in range(44,66):
		ret.agregar_barra(Barra(i,88,R_t[barra_n][0],R_t[barra_n][1],*props))
		barra_n += 1
		
	for i in range(21,44):
		ret.agregar_barra(Barra(i,89,R_t[barra_n][0],R_t[barra_n][1],*props))
		barra_n += 1
		
	for i in range(65,88):
		ret.agregar_barra(Barra(i,89,R_t[barra_n][0],R_t[barra_n][1],*props))
		barra_n += 1
	
	#Union Laterales
	for i in range (x+1):
		ret.agregar_barra(Barra(i,x+1+i,R_t[barra_n][0],R_t[barra_n][1],*props))
		barra_n += 1
	
	#X
	for i in range(x):	
		ret.agregar_barra(Barra(i,x+i+2,R_t[barra_n][0],R_t[barra_n][1],*props))
		barra_n += 1
		ret.agregar_barra(Barra(x+i+1,i+1,R_t[barra_n][0],R_t[barra_n][1],*props))
		barra_n += 1
	
	#Apoyo
	ret.agregar_barra(Barra(90,21,R_t[barra_n][0],R_t[barra_n][1],*props))		
	
	#Nodo 0  y 4 fijos
	ret.agregar_restriccion(0  , 0, 0)
	ret.agregar_restriccion(0  , 1, 0)
	ret.agregar_restriccion(0  , 2, 0)
	ret.agregar_restriccion(x+1, 0, 0)
	ret.agregar_restriccion(x+1, 1, 0)
	ret.agregar_restriccion(x+1, 2, 0)

	# Nodos 3 y 7 libres en X
	ret.agregar_restriccion(x    ,  1, 0)
	ret.agregar_restriccion(x    ,  2, 0)
	ret.agregar_restriccion(2*x+1,  1, 0)
	ret.agregar_restriccion(2*x+1,  2, 0)
	
	ret.agregar_restriccion(90  ,  0, 0)
	ret.agregar_restriccion(90  ,  1, 0)
	ret.agregar_restriccion(90  ,  2, 0)
    
	
	return ret

